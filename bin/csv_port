#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path("../../lib", "__FILE__"))
require 'csv_port'
require 'pry'

include Methadone::Main

module CSVPort

  command = ARGV.first

  main do
    begin
      args = ARGV[1..-1] << options
      Commands.send(command, *args)
    rescue NoMethodError
      binding.pry
      puts "Command not defined"
      #puts "USAGE: ..."
    rescue ArgumentError
      puts "Wrong arguments"
      # puts "USAGE: ..." (for particular command)
    end
  end

  # Temporary solution until I can figure out how to pass options to the command itself
  on("-c", "--config", "Use config file")

end
